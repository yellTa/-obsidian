---
Created time: Invalid date
Last edited time: Invalid date
Posted to Naver: false
Progress: end
ì—…ë¡œë“œí• ê¹Œ?: false
created: 2024-08-03T14:37
updated: 2024-08-06T11:37
---
# OBJECT:

ë¶„í‰ì  ì ìš© + Dockerì„¤ì •ì„ ìœ„í•´ì„œ ì„¸ ë²ˆì§¸ AWSê³„ì •ì„ ë§Œë“ ë‹¤.

## name : 3rdburger

## ì„¤ì¹˜ ëª©ë¡ ë¦¬ìŠ¤íŠ¸

- java openjdk 17
- mysql  
      
    ðŸ”—  
    [[MySQL 8 ëŒ€ì†Œë¬¸ìž êµ¬ë¶„]]  
      
    root ë¹„ë°€ë²ˆí˜¸ - D34lkv@lv!NZ87nV2  
      
    Database ë§Œë“¤ê¸° -1stburger(í„°ë¯¸ë„ì ), 2ndburger(ë¶„í‰ì )  
      
    Databaseì— ê¶Œí•œ ì£¼ê¸° -[DBì´ë¦„ : ìœ ì € ì´ë¦„]  
    passwd - burgerput123  
    [1stburger:1stburgerput] [2ndburger,2ndburgerput]  
    dumpíŒŒì¼ ì´ìš©í•´ì„œ mysqlì˜ ì •ë³´ ì˜®ê¸°ê¸°  
    ê¶Œí•œ ì„¤ì •í•˜ê¸°  
      
    dumpíŒŒì¼ ë„£ê¸°  
    

  

- docker

  

## ì…‹ì—… ë¦¬ìŠ¤íŠ¸

- hostName : 3rdBurger
- ë©”ëª¨ë¦¬ swap

[[swap ë©”ëª¨ë¦¬ ì„¤ì •]]

- ë¶„í‰ì ê³¼ ì²­ì£¼ í„°ë¯¸ë„ì  ê°ê° ë¡œì§

  

  

# ì‚¬ì „ ìž‘ì—…

ë„ì»¤ë¥¼ ì•Œì•„ë³´ê¸° ì „ì— ì¼ë‹¨ ì œì¼ ì²˜ìŒ í…ŒìŠ¤íŠ¸ ì„œë²„ì—(AWS : bbubboru22) ë¶„í‰ì  ë¡œë”©ì´ ìž˜ ëŒì•„ê°€ëŠ”ì§€ ì‹¤í—˜í•´ë³´ê¸°ë¡œ í–ˆë‹¤.

  

```C++


\#spring.profiles.active=burgerput
spring.profiles.active=2ndburgerput

\#Datasource
spring.jpa.defer-datasource-initialization=true

# MySQL
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
# DB Source URL jdbc:mysql://[ip]:3306(mysql í¬íŠ¸ ë²ˆí˜¸)/[DBì´ë¦„]
spring.datasource.url=jdbc:mysql://localhost:3306/2ndburger
# DB username
\#spring.datasource.username=burgerput
spring.datasource.username=2ndburgerput

# DB password
spring.datasource.password=burgerput123

# mysql ì‚¬ìš©
spring.jpa.database=mysql


spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update

\#spring.jpa.show-sql=true
\#spring.jpa.hibernate.ddl-auto=update

\#spring.jpa.properties.hibernate.format_sql=true


#\#Test SSL Settings
\#server.port:8043

server.ssl.key-store:file:/home/ubuntu/burgerput/cicd/deploy/keystore.p12
server.ssl.key-store-type=PKCS12
server.ssl.key-store-password=putBu13@9*


```

mysql ì…‹ì—…ì„ ìœ„ì™€ ê°™ì´ ë³€ê²½í–ˆë‹¤.

ë§ˆì°¬ê°€ì§€ë¡œ mysqlì—ì„œ ìœ ì € ì¶”ê°€ì™€ ë°ì´í„°ë² ì´ìŠ¤ ì¶”ê°€ë¥¼ ìˆ˜í–‰í–ˆë‹¤.

ë³€ê²½ëœ jaríŒŒì¼ì„ êµ¬ë™ì‹œí‚¨ë‹¤. ì´ë•Œ jaríŒŒì¼ì€ ì  í’‹ ë¡œë”©íŽ˜ì´ì§€ë¥¼ ì´ë¯¸ì§€ë¡œ ì°ì–´ì„œ ë³´ë‚¸ë‹¤.

  

## auto Loading crontab set-up

### ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ì„¤ì •

```C++
API_URL="https://[ì„œë²„ë¥¼ ë„ìš´ ipì£¼ì†Œ]:8080/loading"
LOG_FILE="/root/run.log"
MAX_RETRIES=3
RETRIES=0

echo "Cron Script Start"
while [ $RETRIES -lt $MAX_RETRIES ]
do
  response=$(curl -L -X GET $API_URL)
  result=$(echo "$response" | jq -r '.result')
  current_time=$(date "+%Y-%m-%d %H:%M:%S")

  # loading ê°’ í™•ì¸
  if [ "$result" == true ]; then
    echo "[$current_time] Loading is true. Exiting the loop." >> $LOG_FILE
    sh Loading_Success.sh > sys.log
    break
  else
    echo "[$current_time] Loading is false. Retrying..." >> $LOG_FILE
    RETRIES=$((RETRIES + 1))
  fi

  # ì¼ì • ì‹œê°„ ëŒ€ê¸° í›„ ë‹¤ìŒ ì‹œë„
  sleep 5
done
```

### crontab ì„¤ì •

```C++

34 8 * * * . /home/ubuntu/burgerput/sciprts/autoLoading.sh
00 4 * * *  pkill chrome


sudo service cron restart
```

ì´ë ‡ê²Œ ì¶”ê°€í•˜ë©´ ì•„ì¹¨ì— ë¡œë”©ì´ ì´ë£¨ì–´ì§ˆ ê²ƒì´ê³  ê²°ê³¼ê°€ ì´ë¯¸ì§€ë¡œ ì €ìž¥ë  ê²ƒì´ë‹¤.(ì´ë¯¸ì§€ë¡œ ì €ìž¥í•˜ë„ë¡ jaríŒŒì¼ì„ ì„¸íŒ…í–ˆë‹¤.)

  

---

### hostnameë³€ê²½í•˜ëŠ” ë°©ë²•

> [!info] [Linux] Ubuntu 22.04 í˜¸ìŠ¤íŠ¸ëª… (hostname) ë³€ê²½í•˜ê¸°  
> ì²˜ìŒ ìž¥ë¹„ë“¤ì„ ë°›ì•˜ì„ ë•Œ 'server'ë¡œ hostnameì´ ì„¤ì •ë˜ì–´ ìžˆì—ˆë‹¤.  
> [https://aeong-dev.tistory.com/10](https://aeong-dev.tistory.com/10)  

### Mysql user ìƒì„±

> [!info] MySQLì˜ ê³„ì • ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬ ë°©ë²•  
> ðŸ’ðŸ»â€â™‚ï¸ MySQLì˜ ê³„ì • ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬ ðŸ¤” ê³„ì • ìƒì„±ì´ëž€?  
> [https://jay-so.tistory.com/67](https://jay-so.tistory.com/67)  

### íŠ¹ì • DBì— ê¶Œí•œ ë¶€ì—¬

> [!info] [ubuntu/ìš°ë¶„íˆ¬] mysql ì„¤ì¹˜ í›„ root ë¹„ë°€ë²ˆí˜¸ ë³€ê²½/ user ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬  
> Mysql ì„¤ì¹˜ sudo apt-get update sudo apt-get install mysql-server Mysql ì ‘ì† ë° ë¹„ë°€ë²ˆí˜¸ ì„¤ì • - rootë¡œ ì ‘ì† í•œ ë’¤ ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”ë¥¼ í•´ì¤€ë‹¤ 1.  
> [https://yes-admit.tistory.com/127](https://yes-admit.tistory.com/127)  

### Docker ì„¤ì¹˜

> [!info] [Docker] Ubuntu 22.04 Docker ì„¤ì¹˜  
> Ubuntu 22.  
> [https://velog.io/@osk3856/Docker-Ubuntu-22.04-Docker-Installation](https://velog.io/@osk3856/Docker-Ubuntu-22.04-Docker-Installation)  

  

  

  

---